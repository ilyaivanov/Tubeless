(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(16),o=t.n(a),c=(t(62),t(6)),u=t(18),d=t(49),l=t.n(d),f=t(2),s=t(3);function v(){var e=Object(f.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-top: 2px;\n  padding-bottom: 2px;\n  padding-left: ","px;\n"]);return v=function(){return e},e}var g=s.a.div(v(),function(e){return 20*e.level});function m(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return m=function(){return e},e}var p=s.a.div(m());function h(){var e=Object(f.a)(["\n  height: ","px;\n  width: ","px;\n"]);return h=function(){return e},e}function b(){var e=Object(f.a)(["\n  width: 0;\n  height: 0;\n  border-style: solid;\n  ",";\n  visibility: hidden;\n  ",":hover & {\n    visibility: visible;\n  }\n"]);return b=function(){return e},e}var O=function(e){return i.a.createElement(j,{onClick:e.onClick},i.a.createElement(E,{"data-testid":"arrow-"+e.nodeId,orientation:e.orientation}))},E=s.a.div(b(),function(e){return y(e.orientation)},g),j=Object(s.a)(p)(h(),15,15),y=function(e){var n=6.9282.toFixed(1);return"right"===e?"\n    border-width: ".concat(4,"px 0 ").concat(4,"px ").concat(n,"px;\n    border-color: transparent transparent transparent ").concat("rgb(75, 81, 85)",";\n  "):"  \n    border-width: ".concat(n,"px ").concat(4,"px 0 ").concat(4,"px;\n    border-color: ").concat("rgb(75, 81, 85)"," transparent transparent transparent;\n    ")};function x(){var e=Object(f.a)(["\n  height: 2px;\n  background-color: grey;\n  position: absolute;\n  left: ","px;\n  right: 0;\n  ",";\n"]);return x=function(){return e},e}var w=s.a.div(x(),function(e){return 15+20*e.placement.dragLevel},function(e){return"AFTER"===e.placement.orientation?"bottom: -1px":"top: -1px"});function D(){var e=Object(f.a)(["\n  margin-right: 5px;\n"]);return D=function(){return e},e}function C(){var e=Object(f.a)(["\n  border-radius: 10px;\n  width: ",";\n  height: ",";\n  background-color: ",";\n  ",";\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return C=function(){return e},e}var R=i.a.forwardRef(function(e,n){var t=e.itemId;return i.a.createElement(S,{ref:n,"data-testid":"drag-handle-"+t},i.a.createElement(k,{width:18,color:"rgb(220, 224, 226)",hoverColor:"rgb(183, 188, 191)"},i.a.createElement(k,{width:8,color:"rgb(75, 81, 85)"})))}),k=s.a.div(C(),function(e){return"".concat(e.width,"px")},function(e){return"".concat(e.width,"px")},function(e){return"".concat(e.color)},function(e){return e.hoverColor?"&:hover{\n    background-color: ".concat(e.hoverColor,"\n  }"):""}),S=s.a.div(D());function I(){var e=Object(f.a)([""]);return I=function(){return e},e}var A=s.a.span(I());function B(){var e=Object(f.a)(["\n  visibility: hidden;\n  ",":hover & {\n    visibility: visible;\n  }\n  padding-left: 10px;\n"]);return B=function(){return e},e}var T=function(e){var n=e.onEdit,t=e.onDelete,r=e.nodeId;return i.a.createElement(F,null,i.a.createElement("button",{"data-testid":"edit-"+r,onClick:n},"E"),i.a.createElement("button",{"data-testid":"delete-"+r,onClick:t},"X"))},F=s.a.div(B(),g),L=t(55),P=t(7),N=t(5);var U=function(e,n){var t=W(V(e,n),n);return M(e,t,function(e){return{children:(t=e.children,r=n,t?t.filter(function(e){return e!==r}):[])};var t,r})},H=function(e,n){return function(e){if(!e||0===e.length)throw new Error("Expected a non-empty array "+e);return e[0]}(z(e,n))},z=function(e,n){for(var t=[n],r=V(e,n);r;)t=[r].concat(t),r=V(e,r);return t},V=function(e,n){return Object.keys(e).find(function(t){return r=e[t].children,i=n,!!r&&r.indexOf(i)>=0;var r,i})},M=function(e,n,t){return Object(N.a)({},e,Object(P.a)({},n,Object(N.a)({},e[n],t(e[n]))))};function K(e,n){var t=e.indexOf(n.id),r="AFTER"===n.orientation?t+1:t,i=Object(L.a)(e);return i.splice(r,0,n.itemBeingDragged),i}var W=function(e,n){if(!e)throw new Error("Expected parent for node "+n+", but not "+e);return e},q=function(){return Math.random()+""},J=Object(u.DragDropContext)(l.a)(function(e){var n=e.children;return i.a.createElement(r.Fragment,null,n)}),Q=Object(u.DragSource)("NODE",{beginDrag:function(e){return{id:e.node.id}},endDrag:function(e,n){n.didDrop()||e.setPlacement({id:""})}},function(e){return{connectDragSource:e.dragSource()}});var X,Y=Object(u.DropTarget)("NODE",{drop:function(e){e.onDrop()},hover:function(e,n,t){if(!t)return null;var r=t.getNode();if(!r)return null;var i,a,o=function(e){return e.getBoundingClientRect()}(r),c=function(e){return e.getClientOffset()}(n),u=(i=o,a=c.y,(i.bottom+i.top)/2>=a?"BEFORE":"AFTER"),d=Math.max(c.x-15-o.x,0),l=Math.floor(d/20),f=W(V(e.nodes,e.node.id),e.node.id),s=0===(e.nodes[f].children||[]).indexOf(e.node.id),v="BEFORE"===u&&s?e.level:e.level+1,g=l>v?v:l,m={itemBeingDragged:n.getItem().id,id:e.node.id,orientation:u,dragLevel:g};e.setPlacement(m)}},function(e){return{connectDropTarget:e.dropTarget()}});!function(e){e.FAVORITES="ROOT.favorites",e.SEARCH="ROOT.search"}(X||(X={}));var G=Object(N.a)({},$("1",["1.1","1.2"]),$("1.1"),$("1.2",["1.2.1"]),$("1.2.1"),$("2",["2.1"]),$("2.1",["2.1.1"]),$("2.1.1"),$("Ambient",["Carbon Based Lifeforms Album 1","Carbon Based Lifeforms Album 2"]),Z("Carbon Based Lifeforms Album 1","f5ddAAYasgM","https://picsum.photos/id/190/132/132?grayscale"),Z("Carbon Based Lifeforms Album 2","KQE29az48gM","https://picsum.photos/id/191/132/132?grayscale"),_(["1","2"],X.FAVORITES),_(["Ambient"],X.SEARCH));function $(e,n){var t={id:e,text:"Node "+e,children:n,type:"generic"};return Object(P.a)({},e,t)}function Z(e,n,t){var r={id:e,text:e,type:"video",imageUrl:t,videoUrl:n};return Object(P.a)({},e,r)}function _(e,n){var t={id:n,text:n,children:e,type:"root"};return Object(P.a)({},n,t)}var ee=t(52),ne=function(e){return i.a.createElement("div",{style:te},i.a.createElement(ee.a,Object.assign({},e,{onReady:function(n){return e.onReady(n.target)},"data-testid":"player",opts:{height:"150",width:"220",playerVars:{autoplay:1}}})))},te={position:"absolute",right:15,bottom:15},re=function(e){var n=e.videoId,t=Object(r.useState)(),a=Object(c.a)(t,2),o=(a[0],a[1]);return n?i.a.createElement(ne,{onReady:o,videoId:n}):null},ie=function(e,n){if(n.itemBeingDragged===n.id)return e;if(oe(e,n)){var t=q(),r=Object(N.a)({},n,{itemBeingDragged:t});return ae(function e(n,t,r){var i,a=n[t].children;if(a){var o=a.map(function(){return q()});i=o.reduce(function(n,t,r){return e(n,a[r],t)},n),i=M(i,r,function(e){return Object(N.a)({},e,{children:o})})}else i=n;return Object(N.a)({},i,Object(P.a)({},r,Object(N.a)({},i[t],{children:i[r]?i[r].children:void 0,id:r})))}(e,n.itemBeingDragged,t),r)}return ae(U(e,n.itemBeingDragged),n)},ae=function(e,n){if(0!==n.dragLevel){var t=function(e,n){return z(e,n).length-2}(e,n.id);if(n.dragLevel>t)return M(e,n.id,function(e){return{children:[n.itemBeingDragged].concat(e.children||[])}})}var r=W(V(e,n.id),n.id);return M(e,r,function(e){return{children:K(e.children,n)}})},oe=function(e,n){return H(e,n.id)!==H(e,n.itemBeingDragged)};var ce=function(e){var n=e.onDelete,t=e.onUpdate,a=e.node,o=Object(r.useState)(!1),u=Object(c.a)(o,2),d=u[0],l=u[1],f=Object(r.useState)(),s=Object(c.a)(f,2),v=s[0],g=s[1],m=function(){t({id:a.id,text:v}),l(!1)};return i.a.createElement(r.Fragment,null,d?i.a.createElement("input",{"data-testid":"input-"+a.id,onBlur:m,autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&m()},type:"text",value:v,onChange:function(e){return g(e.target.value)}}):i.a.createElement(A,{"data-testid":"title-"+a.id},a.text),i.a.createElement(T,{nodeId:a.id,onEdit:function(){g(a.text),l(!0)},onDelete:function(){return n(a)}}))},ue=Y(Q(i.a.forwardRef(function(e,n){var t=e.children,a=e.node,o=e.level,c=e.onToggleCollapse,u=e.connectDragSource,d=e.connectDropTarget,l=e.placement,f=e.onPlay,s=e.onDelete,v=e.onUpdate,m=Object(r.useRef)(null);return Object(r.useImperativeHandle)(n,function(){return d(m),{getNode:function(){return m.current}}}),i.a.createElement("div",null,i.a.createElement(g,{"data-testid":"node-"+a.id,level:o,ref:m},i.a.createElement(O,{orientation:a.isHidden?"right":"down",nodeId:a.id,onClick:function(){return c(a.id)}}),"video"===a.type?i.a.createElement("img",{onClick:function(){return f(a)},"data-testid":"video-image-".concat(a.id),src:a.imageUrl,alt:"Cover image",style:{height:32,width:32,paddingRight:5},ref:u}):i.a.createElement(R,{itemId:a.id,ref:u}),i.a.createElement(ce,{node:a,onDelete:s,onUpdate:v}),a.id===l.id&&i.a.createElement(w,{placement:l,level:o,"data-testid":"border-"+a.id})),t)}))),de=function(e,n){n.forEach(function(n){if(!e[n]){var t=V(e,n);throw new Error("Node '".concat(t,"' contains a non-existing child '").concat(n,"'. Check children of '").concat(t,"'"))}})},le=function(e){return e.children&&!e.isHidden},fe=function e(n){var t=n.nodes,a=n.ids,o=n.level;return de(t,a),i.a.createElement(r.Fragment,null,a.map(function(r){return i.a.createElement(ue,Object.assign({},n,{key:r,node:t[r],level:o}),le(t[r])&&i.a.createElement(e,Object.assign({},n,{ids:t[r].children,level:o+1})))}))},se=function(e){var n=e.setNodes,t=e.zone,a=e.nodes,o=e.placement,c=e.setPlacement,u=e.onPlay;return i.a.createElement(r.Fragment,null,i.a.createElement(fe,{nodes:a,ids:a[t].children,level:0,onToggleCollapse:function(e){n(M(a,e,function(e){return{isHidden:!e.isHidden}}))},setPlacement:function(e){(function(e,n){if(e===n)return!0;if(!e||!n)return!1;var t=Object.keys(e),r=Object.keys(n),i=t.length;if(r.length!==i)return!1;for(var a=0;a<i;a++){var o=t[a];if(e[o]!==n[o])return!1}return!0})(e,o)||c(e)},onDrop:function(){n(ie(a,o)),c({})},onPlay:u,onDelete:function(e){return n(U(a,e.id))},onUpdate:function(e){e.id&&n(M(a,e.id,function(n){return Object.assign({},n,e)}))},placement:o}),i.a.createElement("button",{"data-testid":"add-new-node",onClick:function(){var e=Math.random()+"",r={text:"New Node",type:"generic",id:e},i=M(a,t,function(n){return{children:n.children.concat([e])}});n(Object(N.a)({},i,Object(P.a)({},e,r)))}},"add"))},ve=function(e){return console.log("Requesting Youtube for ",e),e};var ge=function(e){var n=e.renderRight,t=e.renderLeft,a=e.onSearchDone,o=Object(r.useState)(!1),u=Object(c.a)(o,2),d=u[0],l=u[1],f=d?{flex:1}:{width:40,backgroundColor:"lightGrey"};return i.a.createElement("div",{style:{flexDirection:"row",display:"flex",alignItems:"stretch",height:"100vh"}},i.a.createElement("div",{style:f,"data-testid":"search-zone"},i.a.createElement(me,{isVisible:d,onSearchDone:a,onClick:function(){return l(!d)},renderTree:t})),i.a.createElement("div",{style:{flex:1},"data-testid":"favorites-zone"},n()))},me=function(e){var n=e.isVisible,t=e.onClick,a=e.renderTree,o=e.onSearchDone,u=Object(r.useState)(""),d=Object(c.a)(u,2),l=d[0],f=d[1],s=function(e,n){var t=Object(r.useState)(e),i=Object(c.a)(t,2),a=i[0],o=i[1];return Object(r.useEffect)(function(){var t=setTimeout(function(){o(e)},n);return function(){clearTimeout(t)}},[e,n]),a}(l,500);return Object(r.useEffect)(function(){var e;s&&(e=s,fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&shart=mostPopular&maxResults=10&key=".concat("AIzaSyBsCL-zrXWd9S2FKRSDVfz7dOo783LQkLk","&q=")+ve(e)).then(function(e){return e.json()}).then(function(e){return{videos:e.items.filter(function(e){return e.id.videoId}).map(function(e){return{title:e.snippet.title,videoId:e.id.videoId,previewUrl:e.snippet.thumbnails.default.url}})}})).then(o)},[s]),i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",justifyContent:n?"flex-end":"center",paddingRight:n?20:0}},i.a.createElement("button",{"data-testid":"toggle-sidebar",onClick:t},n?"<":"+")),n&&i.a.createElement("input",{"data-testid":"search-input",type:"text",value:l,onChange:function(e){return f(e.target.value)}}),n&&a())},pe=function(e){var n=e.processDefaultNodes,t=Object(r.useState)(n?n(G):G),a=Object(c.a)(t,2),o=a[0],u=a[1],d=Object(r.useState)({}),l=Object(c.a)(d,2),f=l[0],s=l[1],v=Object(r.useState)({}),g=Object(c.a)(v,2),m=g[0],p=g[1],h=function(e){return p(e)};return i.a.createElement("div",null,i.a.createElement(J,null,i.a.createElement(ge,{onSearchDone:function(e){var n=e.videos.map(function(){return q()}),t=M(o,X.SEARCH,function(){return{children:n}}),r=e.videos.reduce(function(e,t,r){return i=e,a={text:t.title,id:n[r],type:"video",videoUrl:t.videoId,imageUrl:t.previewUrl,isHidden:!0},Object(N.a)({},i,Object(P.a)({},a.id,a));var i,a},t);u(r)},renderRight:function(){return i.a.createElement(se,{zone:X.FAVORITES,placement:f,setPlacement:s,nodes:o,setNodes:u,onPlay:h})},renderLeft:function(){return i.a.createElement(se,{zone:X.SEARCH,placement:f,setPlacement:s,nodes:o,setNodes:u,onPlay:h})}})),i.a.createElement(re,{videoId:m.videoUrl}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},57:function(e,n,t){e.exports=t(128)},62:function(e,n,t){}},[[57,1,2]]]);
//# sourceMappingURL=main.cf535c83.chunk.js.map