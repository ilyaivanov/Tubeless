(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(16),o=n.n(a),c=(n(68),n(7)),u=n(18),l=n(49),d=n.n(l),s=n(3),f=n(4);function p(){var e=Object(s.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-top: 2px;\n  padding-bottom: 2px;\n  padding-left: ","px;\n"]);return p=function(){return e},e}var g=f.a.div(p(),function(e){return 20*e.level});function m(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return m=function(){return e},e}var h=f.a.div(m());function v(){var e=Object(s.a)(["\n  height: ","px;\n  width: ","px;\n  min-width: ","px;\n"]);return v=function(){return e},e}function b(){var e=Object(s.a)(["\n  width: 0;\n  height: 0;\n  border-style: solid;\n  ",";\n  visibility: hidden;\n  ",":hover & {\n    visibility: visible;\n  }\n"]);return b=function(){return e},e}var y=function(e){return i.a.createElement(O,{onClick:e.onClick},i.a.createElement(x,{"data-testid":"arrow-"+e.nodeId,orientation:e.orientation}))},x=f.a.div(b(),function(e){return E(e.orientation)},g),O=Object(f.a)(h)(v(),15,15,15),E=function(e){var t=6.9282.toFixed(1);return"right"===e?"\n    border-width: ".concat(4,"px 0 ").concat(4,"px ").concat(t,"px;\n    border-color: transparent transparent transparent ").concat("rgb(75, 81, 85)",";\n  "):"  \n    border-width: ".concat(t,"px ").concat(4,"px 0 ").concat(4,"px;\n    border-color: ").concat("rgb(75, 81, 85)"," transparent transparent transparent;\n    ")};function j(){var e=Object(s.a)(["\n  height: 2px;\n  background-color: grey;\n  position: absolute;\n  left: ","px;\n  right: 0;\n  ",";\n"]);return j=function(){return e},e}var k=f.a.div(j(),function(e){return 15+20*e.placement.dragLevel},function(e){return"AFTER"===e.placement.orientation?"bottom: -1px":"top: -1px"}),I=n(52),w=n.n(I),P=n(53),R=n.n(P),T=n(54),C=n.n(T),S=n(55),D=n.n(S),A=n(56),N=n.n(A),L=n(57),B=n.n(L);function F(){var e=Object(s.a)(["\n  margin-right: 5px;\n"]);return F=function(){return e},e}function U(){var e=Object(s.a)(["\n  filter: invert(0.3);\n  ",":hover & {\n    filter: invert(0);\n  }\n"]);return U=function(){return e},e}var V=i.a.forwardRef(function(e,t){var n=e.node;return i.a.createElement(M,{ref:t,"data-testid":"drag-handle-"+n.id},i.a.createElement(z,{src:H(n),alt:"",width:25,height:25}))}),H=function(e){if(e.isHidden)return e.children&&e.children.length>0?w.a:e.loader?R.a:C.a;var t=e.children;return t?t.length>1?D.a:N.a:B.a},z=f.a.img(U(),g),M=f.a.div(F());function G(){var e=Object(s.a)([""]);return G=function(){return e},e}var J=f.a.span(G());function K(){var e=Object(s.a)(["\n  visibility: hidden;\n  ",":hover & {\n    visibility: visible;\n  }\n  padding-left: 10px;\n"]);return K=function(){return e},e}var W=function(e){var t=e.onEdit,n=e.onDelete,r=e.nodeId;return i.a.createElement(X,null,i.a.createElement("button",{"data-testid":"edit-"+r,onClick:t},"E"),i.a.createElement("button",{"data-testid":"delete-"+r,onClick:n},"X"))},X=f.a.div(K(),g);function q(){var e=Object(s.a)(["\n  height: 32px;\n  width: 32px;\n\n  max-width: 100%;\n\n  border-radius: ","px;\n\n  ",";\n  margin-right: 5px;\n"]);return q=function(){return e},e}var Q=f.a.img(q(),function(e){return Y(e.type)?60:3},function(e){return Y(e.type)?"":"height: auto"}),Y=function(e){return"Channel"===e||"Playlist"===e},Z=n(6),$=n(1),_=function(){return Math.random()+""};var ee,te=function(e,t){if(!e)throw new Error("Expected parent for node "+t+", but not "+e);return e},ne=function(e,t,n){return Object($.a)({},e,Object(Z.a)({},t,Object($.a)({},e[t],n(e[t]))))},re=function(e,t){var n=te(ae(e,t),t);return ne(e,n,function(e){return{children:(n=e.children,r=t,n?n.filter(function(e){return e!==r}):[])};var n,r})},ie=function(e,t){return function(e){if(!e||0===e.length)throw new Error("Expected a non-empty array "+e);return e[0]}(oe(e,t))},ae=function(e,t){return Object.keys(e).find(function(n){return r=e[n].children,i=t,!!r&&r.indexOf(i)>=0;var r,i})},oe=function(e,t){for(var n=[t],r=ae(e,t);r;)n=[r].concat(n),r=ae(e,r);return n},ce=n(61);!function(e){e.FAVORITES="ROOT.favorites",e.SEARCH="ROOT.search"}(ee||(ee={}));var ue,le,de=Object($.a)({},se("1",["1.1","1.2"]),se("1.1"),se("1.2",["1.2.1"]),se("1.2.1"),se("2",["2.1"]),se("2.1",["2.1.1"]),se("2.1.1"),(ue="Loading Google Playlists",le={channelId:"UC_x5XG1OV2P6uZZ5FSM9Ttw"},Object(Z.a)({},ue,Object($.a)({},pe(le.channelId),{id:ue}))),se("Ambient",["Carbon Based Lifeforms Album 1","Carbon Based Lifeforms Album 2"]),fe("Carbon Based Lifeforms Album 1","f5ddAAYasgM","https://picsum.photos/id/190/132/132?grayscale"),fe("Carbon Based Lifeforms Album 2","KQE29az48gM","https://picsum.photos/id/191/132/132?grayscale"),function(e,t,n){var r={id:e,text:e,type:"Playlist",imageUrl:n,playlistId:t};return Object(Z.a)({},e,r)}("MyPlaylist","MyPlaylistId","https://picsum.photos/id/192/132/132?grayscale"),ge(["1","2","Loading Google Playlists"],ee.FAVORITES),ge(["Ambient"],ee.SEARCH));function se(e,t){var n={id:e,text:"Node "+e,children:t,type:"Composite"};return Object(Z.a)({},e,n)}function fe(e,t,n){var r={id:e,text:e,type:"Video",imageUrl:n,videoUrl:t};return Object(Z.a)({},e,r)}function pe(e){return{id:_(),text:"Playlists",type:"Composite",isHidden:!0,loader:{type:"Playlists",channelId:e}}}function ge(e,t){var n={id:t,text:t,children:e,type:"Root"};return Object(Z.a)({},t,n)}var me=function(e,t){return fetch(Ie("search",{part:"snippet",shart:"mostPopular",maxResults:10,pageToken:t,q:je(e,"search")})).then(function(e){return e.json()}).then(function(e){return{nextPageToken:e.nextPageToken,totalResults:e.pageInfo.totalResults,items:e.items.filter(function(e){return he(e.id.kind)}).map(ve)}})},he=function(e){return"youtube#video"===e||"youtube#playlist"===e||"youtube#channel"===e},ve=function(e){return"youtube#video"===e.id.kind?be(e):"youtube#playlist"===e.id.kind?ye(e):xe(e)},be=function(e){return Object($.a)({},Oe(e.snippet),{previewUrl:e.snippet.thumbnails.default.url,videoId:e.id.videoId,type:"Video"})},ye=function(e){return Object($.a)({},Oe(e.snippet),{previewUrl:e.snippet.thumbnails.default.url,playlistId:e.id.playlistId,type:"Playlist"})},xe=function(e){return Object($.a)({},Oe(e.snippet),{previewUrl:e.snippet.thumbnails.default.url,channelId:e.id.channelId,type:"Channel"})},Oe=function(e){var t=e.title;return{title:Ee(t)}},Ee=function(e){return e.replace(/[^\x00-\x7F]/g,"")},je=function(e,t){return console.log("Requesting Youtube ".concat(t," for ").concat(e)),e},ke={key:"AIzaSyBsCL-zrXWd9S2FKRSDVfz7dOo783LQkLk"},Ie=function(e,t){return"https://www.googleapis.com/youtube/v3/".concat(e,"?").concat(function(e){var t=Object($.a)({},e,ke);return Object.keys(t).filter(function(e){return"undefined"!==typeof t[e]}).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&")}(t))},we=function(e){return e.items.map(Pe)},Pe=function(e){return Object($.a)({id:_(),text:e.title},Re(e),{imageUrl:e.previewUrl,isHidden:!0})},Re=function(e){return{type:Te(e.type),videoUrl:e.videoId,channelId:e.channelId,playlistId:e.playlistId}},Te=function(e){return"Video"===e?"Video":"Playlist"===e?"Playlist":"Channel"},Ce=function(e,t){return ne(e,t,function(){return{isLoading:!0}})},Se=function(e,t,n){if("Video"===e[t].type)n(Ce(e,t)),(a=e[t].videoUrl,o=e[t].nextPageToken,fetch(Ie("search",{part:"snippet",type:"video",maxResults:10,relatedToVideoId:a,pageToken:o})).then(function(e){return e.json()}).then(function(e){return{nextPageToken:e.nextPageToken,totalResults:e.pageInfo.totalResults,items:e.items.filter(function(e){return e.id.videoId}).map(function(e){return Object($.a)({},Oe(e.snippet),{type:"Video",videoId:e.id.videoId,previewUrl:e.snippet.thumbnails.default.url})})}})).then(function(r){return n(De(e,t,we(r),r))});else if("Playlist"===e[t].type)n(Ce(e,t)),function(e,t){return je(e,"playlistItems"),fetch(Ie("playlistItems",{part:"snippet",playlistId:e,maxResults:20,pageToken:t})).then(function(e){return e.json()}).then(function(e){return{nextPageToken:e.nextPageToken,totalResults:e.pageInfo.totalResults,items:e.items.map(function(e){return Object($.a)({},Oe(e.snippet),{type:"Video",videoId:e.snippet.resourceId.videoId,previewUrl:e.snippet.thumbnails.default.url})})}})}(e[t].playlistId,e[t].nextPageToken).then(function(r){return n(De(e,t,we(r),r))});else if("Channel"===e[t].type){var r=e[t].channelId;n(Ce(e,t)),function(e,t){return je(e,"videos for channel"),fetch(Ie("search",{part:"snippet",channelId:e,maxResults:20,order:"date",type:"video",pageToken:t})).then(function(e){return e.json()}).then(function(e){return{nextPageToken:e.nextPageToken,totalResults:e.pageInfo.totalResults,items:e.items.map(ve)}})}(r,e[t].nextPageToken).then(function(i){return n(De(e,t,e[t].nextPageToken?we(i):function(e,t){return[pe(t)].concat(e)}(we(i),r),i))})}else{var i=e[t].loader;if(i){if("Playlists"!==i.type)throw new Error("Unexpected loader: "+i.type);n(Ce(e,t)),function(e,t){return je(e,"playlists for channel"),fetch(Ie("playlists",{part:"snippet%2CcontentDetails",channelId:e,maxResults:25,pageToken:t})).then(function(e){return e.json()}).then(function(e){return{nextPageToken:e.nextPageToken,totalResults:e.pageInfo.totalResults,items:e.items.map(function(e){return Object($.a)({},Oe(e.snippet),{previewUrl:e.snippet.thumbnails.default.url,playlistId:e.id,type:"Playlist"})})}})}(i.channelId,e[t].nextPageToken).then(function(r){return n(De(e,t,we(r),r))})}}var a,o},De=function(e,t,n,r,i){var a=n.map(function(e){return e.id}),o=n.reduce(function(e,t){return function(e,t){return Object($.a)({},e,Object(Z.a)({},t.id,t))}(e,t)},e),c=ne(o,t,function(e){return{children:i?a:(e.children||[]).concat(a),isLoading:!1,isHidden:!1}});return Ae(c,t,r)},Ae=function(e,t,n){return n.totalResults?ne(e,t,function(){return{titlePostfix:Ve(e[t])+(n.nextPageToken?" out "+n.totalResults:""),nextPageToken:n.nextPageToken}}):e},Ne=function(e,t){return ne(e,t,function(e){return{isHidden:!e.isHidden}})},Le=function(e,t){if(t.itemBeingDragged===t.id)return e;if(Fe(e,t)){var n=_(),r=Object($.a)({},t,{itemBeingDragged:n});return Be(function e(t,n,r){var i,a=t[n].children;if(a){var o=a.map(function(){return _()});i=o.reduce(function(t,n,r){return e(t,a[r],n)},t),i=ne(i,r,function(e){return Object($.a)({},e,{children:o})})}else i=t;return Object($.a)({},i,Object(Z.a)({},r,Object($.a)({},i[n],{children:i[r]?i[r].children:void 0,id:r})))}(e,t.itemBeingDragged,n),r)}return Be(re(e,t.itemBeingDragged),t)},Be=function(e,t){if(0!==t.dragLevel){var n=function(e,t){return oe(e,t).length-2}(e,t.id);if(t.dragLevel>n)return ne(e,t.id,function(e){return{children:[t.itemBeingDragged].concat(e.children||[])}})}var r=te(ae(e,t.id),t.id);return ne(e,r,function(e){return{children:Ue(e.children,t)}})},Fe=function(e,t){return ie(e,t.id)!==ie(e,t.itemBeingDragged)};function Ue(e,t){var n=e.indexOf(t.id),r="AFTER"===t.orientation?n+1:n,i=Object(ce.a)(e);return i.splice(r,0,t.itemBeingDragged),i}var Ve=function(e){return e.children?e.children.length:0},He=Object(u.DragDropContext)(d.a)(function(e){var t=e.children;return i.a.createElement(r.Fragment,null,t)}),ze=Object(u.DragSource)("NODE",{beginDrag:function(e){return{id:e.node.id}},endDrag:function(e,t){t.didDrop()||e.setPlacement({id:""})}},function(e){return{connectDragSource:e.dragSource()}});var Me=Object(u.DropTarget)("NODE",{drop:function(e){e.setNodes(Le(e.nodes,e.placement)),e.setPlacement({id:""})},hover:function(e,t,n){if(!n)return null;var r=n.getNode();if(!r)return null;var i,a,o=function(e){return e.getBoundingClientRect()}(r),c=function(e){return e.getClientOffset()}(t),u=(i=o,a=c.y,(i.bottom+i.top)/2>=a?"BEFORE":"AFTER"),l=Math.max(c.x-15-o.x,0),d=Math.floor(l/20),s=te(ae(e.nodes,e.node.id),e.node.id),f=0===(e.nodes[s].children||[]).indexOf(e.node.id),p="BEFORE"===u&&f?e.level:e.level+1,g=d>p?p:d,m={itemBeingDragged:t.getItem().id,id:e.node.id,orientation:u,dragLevel:g};e.setPlacement(m)}},function(e){return{connectDropTarget:e.dropTarget()}}),Ge=n(58),Je=function(e){return i.a.createElement("div",{style:Ke},i.a.createElement(Ge.a,Object.assign({},e,{onReady:function(t){return e.onReady(t.target)},"data-testid":"player",opts:{height:"150",width:"220",playerVars:{autoplay:1}}})))},Ke={position:"absolute",right:15,bottom:15},We=function(e){var t=e.videoId,n=Object(r.useState)(),a=Object(c.a)(n,2),o=(a[0],a[1]);return t?i.a.createElement(Je,{onReady:o,videoId:t}):null},Xe=function(e){var t,n=e.nodes,a=e.node,o=e.setNodes,u=Object(r.useState)(!1),l=Object(c.a)(u,2),d=l[0],s=l[1],f=Object(r.useState)(),p=Object(c.a)(f,2),g=p[0],m=p[1],h=function(){o(function(e,t,n){return ne(e,t,function(){return{text:n}})}(n,a.id,g)),s(!1)},v=function(e){return o(function(e,t){return re(e,t)}(n,e))};return i.a.createElement(r.Fragment,null,d?i.a.createElement("input",{"data-testid":"input-"+a.id,onBlur:h,autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&h()},type:"text",value:g,onChange:function(e){return m(e.target.value)}}):i.a.createElement("div",null,("Channel"===(t=a.type)||"Playlist"===t)&&i.a.createElement("div",{style:{fontSize:11,color:"grey"}},a.type),i.a.createElement(J,{"data-testid":"title-"+a.id},a.text),a.isLoading&&i.a.createElement("span",{"data-testid":"loading-"+a.id},"Loading..."),a.titlePostfix&&i.a.createElement("span",{style:{fontSize:11,color:"grey"}}," ",a.titlePostfix)),i.a.createElement(W,{nodeId:a.id,onEdit:function(){m(a.text),s(!0)},onDelete:function(){return v(a.id)}}))},qe=Me(ze(i.a.forwardRef(function(e,t){var n=e.children,a=e.node,o=e.level,c=e.connectDragSource,u=e.connectDropTarget,l=e.placement,d=e.onPlay,s=e.setNodes,f=e.nodes,p=Object(r.useRef)(null);return Object(r.useImperativeHandle)(t,function(){return u(p),{getNode:function(){return p.current}}}),i.a.createElement("div",null,i.a.createElement(g,{"data-testid":"node-"+a.id,level:o,ref:p},i.a.createElement(y,{orientation:a.isHidden?"right":"down",nodeId:a.id,onClick:function(){return function(e,t,n){var r=e[n].children;if(!(r&&r.length>0))return Se(e,n,t);t(Ne(e,n))}(f,s,a.id)}}),"Composite"!==a.type?i.a.createElement(Q,{type:a.type,alt:"Cover image",onClick:function(){return d(a)},ref:c,src:a.imageUrl,"data-testid":"video-image-".concat(a.id)}):i.a.createElement(V,{node:a,ref:c}),i.a.createElement(Xe,{setNodes:s,nodes:f,node:a}),a.id===l.id&&i.a.createElement(k,{placement:l,level:o,"data-testid":"border-"+a.id})),n,a.nextPageToken&&!a.isHidden&&i.a.createElement("button",{style:{marginLeft:20*o},onClick:function(){return Se(f,a.id,s)}},"more"))}))),Qe=function(e,t){t.forEach(function(t){if(!e[t]){var n=ae(e,t);throw new Error("Node '".concat(n,"' contains a non-existing child '").concat(t,"'. Check children of '").concat(n,"'"))}})},Ye=function(e){return e.children&&!e.isHidden},Ze=function e(t){var n=t.nodes,a=t.ids,o=t.level;return Qe(n,a),i.a.createElement(r.Fragment,null,a.map(function(r){return i.a.createElement(qe,Object.assign({},t,{key:r,node:n[r],level:o}),Ye(n[r])&&i.a.createElement(e,Object.assign({},t,{ids:n[r].children,level:o+1})))}))},$e=function(e){var t=e.renderRight,n=e.renderLeft,a=e.onSearchDone,o=e.searchNode,u=Object(r.useState)(!1),l=Object(c.a)(u,2),d=l[0],s=l[1],f=d?{flex:1}:{width:40,backgroundColor:"lightGrey"};return i.a.createElement("div",{style:{flexDirection:"row",display:"flex",alignItems:"stretch",height:"100vh"}},i.a.createElement("div",{style:f,"data-testid":"search-zone"},i.a.createElement(_e,{searchNode:o,isVisible:d,onSearchDone:a,onClick:function(){return s(!d)},renderTree:n})),i.a.createElement("div",{style:{flex:1},"data-testid":"favorites-zone"},t()))},_e=function(e){var t=e.searchNode,n=e.isVisible,a=e.onClick,o=e.renderTree,u=e.onSearchDone,l=Object(r.useState)(""),d=Object(c.a)(l,2),s=d[0],f=d[1],p=function(e,t){var n=Object(r.useState)(e),i=Object(c.a)(n,2),a=i[0],o=i[1];return Object(r.useEffect)(function(){var n=setTimeout(function(){o(e)},t);return function(){clearTimeout(n)}},[e,t]),a}(s,500);Object(r.useEffect)(function(){p&&me(p).then(function(e){return u(e,!0)})},[p]);return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",justifyContent:n?"flex-end":"center",paddingRight:n?20:0}},i.a.createElement("button",{"data-testid":"toggle-sidebar",onClick:a},n?"<":"+")),n&&i.a.createElement(r.Fragment,null,i.a.createElement("input",{"data-testid":"search-input",type:"text",value:s,onChange:function(e){return f(e.target.value)}})," ",t.titlePostfix&&i.a.createElement("span",{style:{fontSize:11,color:"grey"}}," ",t.titlePostfix)),n&&o(),n&&i.a.createElement("button",{onClick:function(){me(p,t.nextPageToken).then(u)}},"more"))},et=function(e){var t=e.processDefaultNodes,n=Object(r.useState)(t?t(de):de),a=Object(c.a)(n,2),o=a[0],u=a[1],l=function(e){u(e),window.localStorage.setItem("nodes:v0.1",JSON.stringify(e))};Object(r.useEffect)(function(){var e=window.localStorage.getItem("nodes:v0.1");e&&u(JSON.parse(e))},[]);var d=Object(r.useState)({}),s=Object(c.a)(d,2),f=s[0],p=s[1],g=Object(r.useState)({}),m=Object(c.a)(g,2),h=m[0],v=m[1],b=function(e){return v(e)},y=function(e){(function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(var a=0;a<i;a++){var o=n[a];if(e[o]!==t[o])return!1}return!0})(e,f)||(console.count("called set placement"),p(e))},x=function(){return l(function(e,t){var n=Math.random()+"",r={text:"New Node",type:"Composite",id:n},i=ne(e,t,function(e){return{children:e.children.concat([n])}});return Object($.a)({},i,Object(Z.a)({},n,r))}(o,ee.FAVORITES))};return i.a.createElement("div",null,i.a.createElement(He,null,i.a.createElement($e,{searchNode:o[ee.SEARCH],onSearchDone:function(e,t){l(De(o,ee.SEARCH,we(e),e,t))},renderRight:function(){return i.a.createElement(r.Fragment,null,i.a.createElement(Ze,{nodes:o,ids:o[ee.FAVORITES].children,level:0,setPlacement:y,setNodes:l,onPlay:b,placement:f}),i.a.createElement("button",{"data-testid":"add-new-node",onClick:x},"add"))},renderLeft:function(){return i.a.createElement(Ze,{nodes:o,ids:o[ee.SEARCH].children,level:0,onPlay:b,setPlacement:y,setNodes:l,placement:f})}})),i.a.createElement(We,{videoId:h.videoUrl}),i.a.createElement("button",{style:{position:"absolute",top:5,right:5},onClick:function(){u(de),window.localStorage.removeItem("nodes:v0.1")}},"Reset"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,n){e.exports=n.p+"static/media/folder-closed-withItems.64114435.svg"},53:function(e,t,n){e.exports=n.p+"static/media/folder-closed-loader.d552820a.svg"},54:function(e,t,n){e.exports=n.p+"static/media/folder-closed-empty.5f8d5aa0.svg"},55:function(e,t,n){e.exports=n.p+"static/media/folder-opened-many.f8af0c07.svg"},56:function(e,t,n){e.exports=n.p+"static/media/folder-opened-single.cfca5246.svg"},57:function(e,t,n){e.exports=n.p+"static/media/folder-opened-empty.feffd839.svg"},63:function(e,t,n){e.exports=n(134)},68:function(e,t,n){}},[[63,1,2]]]);
//# sourceMappingURL=main.1e2bb0f5.chunk.js.map